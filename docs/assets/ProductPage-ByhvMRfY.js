import{_ as D}from"./Loading.vue_vue_type_style_index_0_lang-C59pOsMH.js";import{d as U,$ as N,c as f,r as Q,J as Z,b as s,e as h,L as F,a3 as G,h as t,O as n,F as k,f as C,B as E,N as T,P as j,a as o,Q as M,A as W,R as w,K as V,n as $,k as O}from"./@vee-validate-CHlFrRps.js";import{b as B,u as x,c as J}from"./index-Dr1UnRI8.js";import{a as H,u as S}from"./useWishList-CgmIZ_CT.js";const Y="data:image/gif;base64,R0lGODlhKAAkAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OERDRTZEMEVBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OERDRTZEMEZBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RENFNkQwQ0FEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RENFNkQwREFEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAAALAAAAAAoACQAAAIlhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jedNAQA7",X={class:"productPage_actionBlock"},q=["disabled"],K={value:0,disabled:""},tt=["value","disabled"],et={class:"productPage_actionBtns"},at=["disabled"],it=U({__name:"ActionBtn",props:{id:{required:!0,type:String,default:""},idModifiers:{},unit:{required:!0,type:String,default:""},unitModifiers:{},title:{required:!0,type:String,default:""},titleModifiers:{}},emits:["update:id","update:unit","update:title"],setup(L){const d=N(L,"id"),e=N(L,"unit"),R=N(L,"title"),{wishList:c,addToWishList:v,removeWishList:A}=H(),g=f(()=>c.value.includes(d.value)),r=f(()=>({icon:g.value?["fas","heart"]:["far","heart"],text:g.value?_("productPage.removeFromWishList"):_("productPage.addToWishList")})),{addToCart:m,useCartLoading:I,cart:l}=B(),a=f(()=>{let b=10;const p=l.value.carts.findIndex(y=>y.product_id===d.value);return p>=0&&(b=b-=l.value.carts[p].qty),b}),u=Q(a.value===0?0:1),{t:_}=x(),i=f(()=>({class:a.value===0?"text-danger":"text-grey",text:a.value===0?_("productPage.reachedLimit"):_("productPage.purchaseLimit",{unit:e.value})})),z=async()=>{await m({qty:u.value,product_id:d.value,mode:"add",title:R.value}),u.value=a.value===0?0:1};return(b,p)=>{const y=Z("font-awesome-icon");return s(),h("div",X,[F(t("select",{disabled:a.value===0,"onUpdate:modelValue":p[0]||(p[0]=P=>u.value=P)},[t("option",K,n(b.$t("productPage.selectQuantity")),1),(s(),h(k,null,C(10,P=>t("option",{key:P,value:P,disabled:P>a.value},n(b.$t("productPage.select",{value:P,unit:e.value})),9,tt)),64))],8,q),[[G,u.value]]),t("div",{class:j([i.value.class,"productPage_tip"])},[E(y,{icon:["fas","circle-exclamation"]}),T(" "+n(i.value.text),1)],2),t("div",et,[t("button",{type:"button",class:"btn btn-danger btn-outline",onClick:p[1]||(p[1]=P=>g.value?o(A)(`${d.value}`):o(v)(`${d.value}`))},[E(y,{icon:r.value.icon},null,8,["icon"]),t("span",null,n(r.value.text),1)]),t("button",{disabled:a.value===0,type:"button",class:"btn btn-success btn-outline",onClick:p[2]||(p[2]=P=>z())},[o(I)?(s(),M(y,{key:0,icon:["fas","spinner"],"spin-pulse":""})):(s(),M(y,{key:1,icon:["fas","basket-shopping"]})),t("span",null,n(b.$t("productPage.addToCart")),1)],8,at)])])}}}),ot={class:"container productPage"},lt={class:"productPage_info"},nt=["src"],st={class:"productPage_info_main"},ut={class:"productPage_info_title"},dt={class:"productPage_info_content"},ct={class:"productPage_price"},rt={class:"price-origin"},pt={class:"price-special"},vt={class:"productPage_title"},gt=["innerHTML"],mt={class:"productPage_title"},_t={class:"productPage_similarList"},Pt=t("img",{src:Y},null,-1),ft=U({__name:"Index",setup(L){const{productList:d,productPageData:e,getProduct:R}=S(),c=f(()=>d.value.filter(l=>{var a;return l.category===((a=e.value)==null?void 0:a.category)&&l.id!==e.value.id})),v=f(()=>{let l=0;return c.value.length>=3?l=3:l=c.value.length,l}),A=f(()=>{let l=[];if(v.value>1){let a=c.value.map((u,_)=>_).sort(()=>Math.random()-.5);for(let u=0;u<v.value;u++)l.push(c.value[Number(a[u])])}else v.value===1&&(l=[...c.value]);return l}),{useCartLoading:g,cart:r}=B(),m=Q(!0),I=f(()=>Object.keys(e.value).length&&Object.keys(r.value).length);return(l,a)=>{const u=Z("font-awesome-icon"),_=Z("router-link");return s(),h(k,null,[E(D,{loading:o(g),"onUpdate:loading":a[0]||(a[0]=i=>W(g)?g.value=i:null),"full-page":m.value,"onUpdate:fullPage":a[1]||(a[1]=i=>m.value=i)},null,8,["loading","full-page"]),t("div",ot,[t("div",lt,[t("img",{src:o(e).imageUrl},null,8,nt),t("div",st,[t("div",ut,n(o(e).title),1),t("div",dt,[t("div",null,n(o(e).description),1),t("div",null,n(o(e).content),1)]),t("div",ct,[t("div",rt,n(l.$t("common.originalPrice",{price:o(e).origin_price})),1),t("div",pt,n(l.$t("common.specialPrice",{price:o(e).price})),1)]),I.value?(s(),M(it,{key:0,id:o(e).id,"onUpdate:id":a[2]||(a[2]=i=>o(e).id=i),unit:o(e).unit,"onUpdate:unit":a[3]||(a[3]=i=>o(e).unit=i),title:o(e).title,"onUpdate:title":a[4]||(a[4]=i=>o(e).title=i)},null,8,["id","unit","title"])):w("",!0)])]),t("div",vt,[t("span",null,n(l.$t("productPage.qa")),1)]),(s(),h(k,null,C(3,i=>t("div",{key:i,class:"productPage_qa"},[E(u,{icon:["far","question-circle"]}),t("div",{innerHTML:l.$t(`productPage.qa-${i}`)},null,8,gt)])),64)),v.value?(s(),h(k,{key:0},[t("div",mt,[t("span",null,n(l.$t("productPage.similar")),1)]),t("div",_t,[(s(!0),h(k,null,C(A.value,i=>(s(),M(_,{key:i.id,to:{name:"productPage",params:{id:i.id}},onClick:z=>o(R)(i.id)},{default:V(()=>[t("div",{style:$(`background-image: url(${i.imageUrl})`),class:"productPage_similarList_img"},[Pt,t("div",null,n(i.title),1)],4)]),_:2},1032,["to","onClick"]))),128))])],64)):w("",!0)])],64)}}}),kt=U({__name:"ProductPage",setup(L){const d=J(),{productPageLoading:e,getProduct:R,getProductList:c,productPageData:v}=S(),A=Q(!0);return O(async()=>{await R(`${d.params.id}`),await c()}),(g,r)=>(s(),h(k,null,[E(D,{loading:o(e),"onUpdate:loading":r[0]||(r[0]=m=>W(e)?e.value=m:null),"full-page":A.value,"onUpdate:fullPage":r[1]||(r[1]=m=>A.value=m)},null,8,["loading","full-page"]),Object.keys(o(v)).length&&!o(e)?(s(),M(ft,{key:0})):w("",!0)],64))}});export{kt as default};
