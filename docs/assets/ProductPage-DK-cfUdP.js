import{_ as W}from"./Loading.vue_vue_type_style_index_0_lang-C59pOsMH.js";import{d as Q,$ as N,c as P,r as z,J as C,b as n,e as b,L as F,a3 as T,h as t,O as l,F as k,f as w,B as E,N as Z,P as $,a as o,Q as M,A as B,R as U,K as j,n as V,k as O}from"./@vee-validate-CHlFrRps.js";import{b as S,u as J,d as H}from"./index-D5G8d3-0.js";import{a as Y,u as G}from"./useWishList-DeSNUpIK.js";const x="data:image/gif;base64,R0lGODlhKAAkAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OERDRTZEMEVBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OERDRTZEMEZBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RENFNkQwQ0FEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RENFNkQwREFEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAAALAAAAAAoACQAAAIlhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jedNAQA7",X={class:"productPage_actionBlock"},q=["disabled"],K={value:0,disabled:""},tt=["value","disabled"],et={class:"productPage_actionBtns"},at=["disabled"],it=Q({__name:"ActionBtn",props:{id:{required:!0,type:String,default:""},idModifiers:{},unit:{required:!0,type:String,default:""},unitModifiers:{},title:{required:!0,type:String,default:""},titleModifiers:{}},emits:["update:id","update:unit","update:title"],setup(L){const d=N(L,"id"),e=N(L,"unit"),R=N(L,"title"),{wishList:c,addToWishList:p,removeWishList:A}=Y(),f=P(()=>c.value.includes(d.value)),g=P(()=>f.value?["fas","heart"]:["far","heart"]),{addToCart:v,useCartLoading:I,cart:s}=S(),a=P(()=>{let m=10;const r=s.value.carts.findIndex(y=>y.product_id===d.value);return r>=0&&(m=m-=s.value.carts[r].qty),m}),u=z(a.value===0?0:1),{t:h}=J(),i=P(()=>({class:a.value===0?"text-danger":"text-grey",text:a.value===0?h("productPage.reachedLimit"):h("productPage.purchaseLimit",{unit:e.value})})),D=async()=>{await v({qty:u.value,product_id:d.value,mode:"add",title:R.value}),u.value=a.value===0?0:1};return(m,r)=>{const y=C("font-awesome-icon");return n(),b("div",X,[F(t("select",{disabled:a.value===0,"onUpdate:modelValue":r[0]||(r[0]=_=>u.value=_)},[t("option",K,l(m.$t("productPage.selectQuantity")),1),(n(),b(k,null,w(10,_=>t("option",{key:_,value:_,disabled:_>a.value},l(m.$t("productPage.select",{value:_,unit:e.value})),9,tt)),64))],8,q),[[T,u.value]]),t("div",{class:$([i.value.class,"productPage_tip"])},[E(y,{icon:["fas","circle-exclamation"]}),Z(" "+l(i.value.text),1)],2),t("div",et,[t("button",{type:"button",class:"btn btn-danger btn-outline",onClick:r[1]||(r[1]=_=>f.value?o(A)(`${d.value}`):o(p)(`${d.value}`))},[E(y,{icon:g.value},null,8,["icon"]),Z(" "+l(m.$t("productPage.addToWishList")),1)]),t("button",{disabled:a.value===0,type:"button",class:"btn btn-success btn-outline",onClick:r[2]||(r[2]=_=>D())},[o(I)?(n(),M(y,{key:0,icon:["fas","spinner"],"spin-pulse":""})):(n(),M(y,{key:1,icon:["fas","basket-shopping"]})),Z(" "+l(m.$t("productPage.addToCart")),1)],8,at)])])}}}),ot={class:"container productPage"},st={class:"productPage_info"},lt=["src"],nt={class:"productPage_info_main"},ut={class:"productPage_info_title"},dt={class:"productPage_info_content"},ct={class:"productPage_price"},rt={class:"price-origin"},pt={class:"price-special"},gt={class:"productPage_title"},vt=["innerHTML"],mt={class:"productPage_title"},_t={class:"productPage_similarList"},Pt=t("img",{src:x},null,-1),ft=Q({__name:"Index",setup(L){const{productList:d,productPageData:e,getProduct:R}=G(),c=P(()=>d.value.filter(s=>{var a;return s.category===((a=e.value)==null?void 0:a.category)&&s.id!==e.value.id})),p=P(()=>{let s=0;return c.value.length>=3?s=3:s=c.value.length,s}),A=P(()=>{let s=[];if(p.value>1){let a=c.value.map((u,h)=>h).sort(()=>Math.random()-.5);for(let u=0;u<p.value;u++)s.push(c.value[Number(a[u])])}else p.value===1&&(s=[...c.value]);return s}),{useCartLoading:f,cart:g}=S(),v=z(!0),I=P(()=>Object.keys(e.value).length&&Object.keys(g.value).length);return(s,a)=>{const u=C("font-awesome-icon"),h=C("router-link");return n(),b(k,null,[E(W,{loading:o(f),"onUpdate:loading":a[0]||(a[0]=i=>B(f)?f.value=i:null),"full-page":v.value,"onUpdate:fullPage":a[1]||(a[1]=i=>v.value=i)},null,8,["loading","full-page"]),t("div",ot,[t("div",st,[t("img",{src:o(e).imageUrl},null,8,lt),t("div",nt,[t("div",ut,l(o(e).title),1),t("div",dt,[t("div",null,l(o(e).description),1),t("div",null,l(o(e).content),1)]),t("div",ct,[t("div",rt,l(s.$t("common.originalPrice",{price:o(e).origin_price})),1),t("div",pt,l(s.$t("common.specialPrice",{price:o(e).price})),1)]),I.value?(n(),M(it,{key:0,id:o(e).id,"onUpdate:id":a[2]||(a[2]=i=>o(e).id=i),unit:o(e).unit,"onUpdate:unit":a[3]||(a[3]=i=>o(e).unit=i),title:o(e).title,"onUpdate:title":a[4]||(a[4]=i=>o(e).title=i)},null,8,["id","unit","title"])):U("",!0)])]),t("div",gt,[t("span",null,l(s.$t("productPage.qa")),1)]),(n(),b(k,null,w(3,i=>t("div",{key:i,class:"productPage_qa"},[E(u,{icon:["far","question-circle"]}),t("div",{innerHTML:s.$t(`productPage.qa-${i}`)},null,8,vt)])),64)),p.value?(n(),b(k,{key:0},[t("div",mt,[t("span",null,l(s.$t("productPage.similar")),1)]),t("div",_t,[(n(!0),b(k,null,w(A.value,i=>(n(),M(h,{key:i.id,to:{name:"productPage",params:{id:i.id}},onClick:D=>o(R)(i.id)},{default:j(()=>[t("div",{style:V(`background-image: url(${i.imageUrl})`),class:"productPage_similarList_img"},[Pt,t("div",null,l(i.title),1)],4)]),_:2},1032,["to","onClick"]))),128))])],64)):U("",!0)])],64)}}}),kt=Q({__name:"ProductPage",setup(L){const d=H(),{productPageLoading:e,getProduct:R,getProductList:c,productPageData:p}=G(),A=z(!0);return O(async()=>{await R(`${d.params.id}`),await c()}),(f,g)=>(n(),b(k,null,[E(W,{loading:o(e),"onUpdate:loading":g[0]||(g[0]=v=>B(e)?e.value=v:null),"full-page":A.value,"onUpdate:fullPage":g[1]||(g[1]=v=>A.value=v)},null,8,["loading","full-page"]),Object.keys(o(p)).length&&!o(e)?(n(),M(ft,{key:0})):U("",!0)],64))}});export{kt as default};
