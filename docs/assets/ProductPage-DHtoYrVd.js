import{_ as S}from"./Loading.vue_vue_type_style_index_0_lang-Bho9Zs6C.js";import{d as Q,y as Z,f as P,K as W,r as T,v as j,j as C,o as u,c as f,H as $,R as V,q as t,t as l,F as h,m as w,k as R,Q as N,J as O,u as a,M as L,P as B,B as U,l as H,s as J,b as Y,S as x}from"./index-BamSWWtl.js";import{a as X,u as G}from"./useWishList-BU8MOFlq.js";const q="data:image/gif;base64,R0lGODlhKAAkAIAAAP///wAAACH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OERDRTZEMEVBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OERDRTZEMEZBRDMwMTFFQUE5QzZFRUEzMkZCMEQwRUEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4RENFNkQwQ0FEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4RENFNkQwREFEMzAxMUVBQTlDNkVFQTMyRkIwRDBFQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAAALAAAAAAoACQAAAIlhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jedNAQA7",K={class:"productPage_actionBlock"},tt=["disabled"],et={value:0,disabled:""},it=["value","disabled"],at={class:"productPage_actionBtns"},ot=["disabled"],st=Q({__name:"ActionBtn",props:{id:{required:!0,type:String,default:""},idModifiers:{},unit:{required:!0,type:String,default:""},unitModifiers:{},title:{required:!0,type:String,default:""},titleModifiers:{}},emits:["update:id","update:unit","update:title"],setup(y){const c=Z(y,"id"),e=Z(y,"unit"),k=Z(y,"title"),{wishList:r,addToWishList:g,removeWishList:M}=X(),d=P(()=>r.value.includes(c.value)),b=P(()=>d.value?["fas","heart"]:["far","heart"]),{addToCart:E,useCartLoading:o,cart:s}=W(),n=P(()=>{let m=10;const p=s.value.carts.findIndex(A=>A.product_id===c.value);return p>=0&&(m=m-=s.value.carts[p].qty),m}),v=T(n.value===0?0:1),{t:i}=j(),I=P(()=>({class:n.value===0?"text-danger":"text-grey",text:n.value===0?i("productPage.reachedLimit"):i("productPage.purchaseLimit",{unit:e.value})})),F=async()=>{await E({qty:v.value,product_id:c.value,mode:"add",title:k.value}),v.value=n.value===0?0:1};return(m,p)=>{const A=C("font-awesome-icon");return u(),f("div",K,[$(t("select",{disabled:n.value===0,"onUpdate:modelValue":p[0]||(p[0]=_=>v.value=_)},[t("option",et,l(m.$t("productPage.selectQuantity")),1),(u(),f(h,null,w(10,_=>t("option",{key:_,value:_,disabled:_>n.value},l(m.$t("productPage.select",{value:_,unit:e.value})),9,it)),64))],8,tt),[[V,v.value]]),t("div",{class:O([I.value.class,"productPage_tip"])},[R(A,{icon:["fas","circle-exclamation"]}),N(" "+l(I.value.text),1)],2),t("div",at,[t("button",{type:"button",class:"btn btn-danger btn-outline",onClick:p[1]||(p[1]=_=>d.value?a(M)(`${c.value}`):a(g)(`${c.value}`))},[R(A,{icon:b.value},null,8,["icon"]),N(" "+l(m.$t("productPage.addToWishList")),1)]),t("button",{disabled:n.value===0,type:"button",class:"btn btn-success btn-outline",onClick:p[2]||(p[2]=_=>F())},[a(o)?(u(),L(A,{key:0,icon:["fas","spinner"],"spin-pulse":""})):(u(),L(A,{key:1,icon:["fas","basket-shopping"]})),N(" "+l(m.$t("productPage.addToCart")),1)],8,ot)])])}}}),nt={class:"container productPage"},lt={class:"productPage_info"},ut=["src"],dt={class:"productPage_info_main"},ct={class:"productPage_info_title"},rt={class:"productPage_info_content"},pt={class:"productPage_price"},gt={class:"price-origin"},vt={class:"price-special"},mt={class:"productPage_title"},_t=["innerHTML"],Pt={class:"productPage_title"},bt={class:"productPage_similarList"},ft=t("img",{src:q},null,-1),z=!0,At=Q({__name:"Index",setup(y){const{productList:c,productPageData:e,getProduct:k}=G(),r=P(()=>c.value.filter(o=>{var s;return o.category===((s=e.value)==null?void 0:s.category)&&o.id!==e.value.id})),g=P(()=>{let o=0;return r.value.length>=3?o=3:o=r.value.length,o}),M=P(()=>{let o=[];if(g.value>1){let s=r.value.map((n,v)=>v).sort(()=>Math.random()-.5);for(let n=0;n<g.value;n++)o.push(r.value[Number(s[n])])}else g.value===1&&(o=[...r.value]);return o}),{useCartLoading:d,cart:b}=W(),E=P(()=>Object.keys(e.value).length&&Object.keys(b.value).length);return(o,s)=>{const n=C("font-awesome-icon"),v=C("router-link");return u(),f(h,null,[R(S,{loading:a(d),"onUpdate:loading":s[0]||(s[0]=i=>B(d)?d.value=i:null),"full-page":z,"onUpdate:fullPage":s[1]||(s[1]=i=>z=i)},null,8,["loading"]),t("div",nt,[t("div",lt,[t("img",{src:a(e).imageUrl},null,8,ut),t("div",dt,[t("div",ct,l(a(e).title),1),t("div",rt,[t("div",null,l(a(e).description),1),t("div",null,l(a(e).content),1)]),t("div",pt,[t("div",gt,l(o.$t("common.originalPrice",{price:a(e).origin_price})),1),t("div",vt,l(o.$t("common.specialPrice",{price:a(e).price})),1)]),E.value?(u(),L(st,{key:0,id:a(e).id,"onUpdate:id":s[2]||(s[2]=i=>a(e).id=i),unit:a(e).unit,"onUpdate:unit":s[3]||(s[3]=i=>a(e).unit=i),title:a(e).title,"onUpdate:title":s[4]||(s[4]=i=>a(e).title=i)},null,8,["id","unit","title"])):U("",!0)])]),t("div",mt,[t("span",null,l(o.$t("productPage.qa")),1)]),(u(),f(h,null,w(3,i=>t("div",{key:i,class:"productPage_qa"},[R(n,{icon:["far","question-circle"]}),t("div",{innerHTML:o.$t(`productPage.qa-${i}`)},null,8,_t)])),64)),g.value?(u(),f(h,{key:0},[t("div",Pt,[t("span",null,l(o.$t("productPage.similar")),1)]),t("div",bt,[(u(!0),f(h,null,w(M.value,i=>(u(),L(v,{key:i.id,to:{name:"productPage",params:{id:i.id}},onClick:I=>a(k)(i.id)},{default:H(()=>[t("div",{style:J(`background-image: url(${i.imageUrl})`),class:"productPage_similarList_img"},[ft,t("div",null,l(i.title),1)],4)]),_:2},1032,["to","onClick"]))),128))])],64)):U("",!0)])],64)}}}),D=!0,Rt=Q({__name:"ProductPage",setup(y){const c=x(),{productPageLoading:e,getProduct:k,getProductList:r,productPageData:g}=G();return Y(async()=>{await k(`${c.params.id}`),await r()}),(M,d)=>(u(),f(h,null,[R(S,{loading:a(e),"onUpdate:loading":d[0]||(d[0]=b=>B(e)?e.value=b:null),"full-page":D,"onUpdate:fullPage":d[1]||(d[1]=b=>D=b)},null,8,["loading"]),Object.keys(a(g)).length&&!a(e)?(u(),L(At,{key:0})):U("",!0)],64))}});export{Rt as default};
